html { overflow-y: scroll; }

html {
  zoom: 0.9;  /* 1.0 = 원래 크기, 0.9 = 90% 크기 */
}

html {
  /* 항상 세로 스크롤바 자리 확보해서 레이아웃이 좌우로 안 튐 */
  overflow-y: scroll;
  /* 크롬/엣지 최신이면 이거도 같이 쓰면 더 안정적 */
  scrollbar-gutter: stable;
}

body {
  max-width: 1100px;
  margin: 20px auto;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 14px;
}

h1 {
  text-align: center;
  margin-bottom: 24px;
  font-size: 28px;
}

/* 왼쪽 / 오른쪽 크게 나누기 */
.main-layout {
  display: flex;
  gap: 32px;
  align-items: flex-start;
}

/* 왼쪽: 입력 + 게임데이터 */
.left-panel {
  flex: 1.1;
}

/* 오른쪽: 전체 등수 */
.right-panel {
  flex: 1.0;
}

/* 입력 폼 안 레이아웃: [라벨 | 이름 | 점수] */
#game-form .row {
  display: grid;
  grid-template-columns: 40px 1fr 140px;
  gap: 8px;
  margin-bottom: 8px;
}

#game-form label {
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

#game-form input[type="text"],
#game-form input[type="number"] {
  width: 100%;
  box-sizing: border-box;
  padding: 6px 8px;
}

#game-form button {
  margin-top: 4px;
  padding: 6px 12px;
  cursor: pointer;
}

/* 공통 섹션 여백 */
section {
  margin-bottom: 16px;
}

/* 공통 테이블 스타일 */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 8px;
  font-size: 13px;
}

th,
td {
  border: 1px solid #ddd;
  padding: 6px 8px;
  text-align: center;
}

th {
  background-color: #f3f3f3;
}

/* 게임 데이터 테이블 안 플레이어 셀 */
.player-name {
  font-weight: 600;
}

.player-score {
  font-size: 12px;
  color: #555;
}

/* 1등 칸 하이라이트 */
td.winner {
  background-color: #e0f2ff;
}

/* 오른쪽 전체 등수 테이블 */
.ranking-table {
  font-size: 13px;
}

.ranking-placeholder {
  padding: 16px 8px;
  color: #777;
}

.ranking-table {
  font-size: 13px;
  table-layout: fixed;
}

/* 순위 칸 */
.ranking-table th:nth-child(1),
.ranking-table td:nth-child(1) {
  width: 30px;
}

/* 이름 칸 */
.ranking-table th:nth-child(2),
.ranking-table td:nth-child(2) {
  width: 70px;
}

/* 게임 수 칸 */
.ranking-table th:nth-child(3),
.ranking-table td:nth-child(3) {
  width: 50px;
}

/* 총 pt 칸 */
.ranking-table th:nth-child(4),
.ranking-table td:nth-child(4) {
  width: 50px;
}

.ranking-table th:nth-child(5),
.ranking-table td:nth-child(5) {
  width: 50px;
}

.ranking-table th:nth-child(6),
.ranking-table td:nth-child(6) {
  width: 130px;
}

#rankDistChart {
  margin-top: 16px;
  max-width: 100%;
}

.rank-dist-wrap {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* 위에 텍스트 라인 */
.rank-dist-labels {
  display: flex;
  flex-wrap: nowrap;
  gap: 6px;
  justify-content: center;
  font-size: 11px;
  white-space: nowrap;
}

/* 각 텍스트에 색 힌트 */
.rank-label {
  padding: 1px 4px;
  border-radius: 4px;
  background-color: rgba(255, 255, 255, 0.8);
}

.rank-label1 {
  border-left: 4px solid #4dd2a6;
}
.rank-label2 {
  border-left: 4px solid #4f9cff;
}
.rank-label3 {
  border-left: 4px solid #d9d9d9;
}
.rank-label4 {
  border-left: 4px solid #ff6b81;
}

/* 1·2·3·4등 분포 가로 막대 */
.rank-dist-bar {
  display: flex;
  width: 100%;
  height: 14px;
  border-radius: 8px;
  overflow: hidden;
  background-color: #f0f0f0;
}

.rank-seg {
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.rank-seg span {
  font-size: 10px;
  color: #ffffff;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
  white-space: nowrap;
}

.rank-seg1 {
  background-color: #4dd2a6;
}
.rank-seg2 {
  background-color: #4f9cff;
}
.rank-seg3 {
  background-color: #d9d9d9;
}
.rank-seg4 {
  background-color: #ff6b81;
}

/* 전체 등수 제목 + 색 범례 */
.ranking-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.ranking-header h2 {
  margin: 0;
}

/* 1등~4등 색 범례 */
.rank-legend {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  white-space: nowrap;
}

.legend-color {
  display: inline-block;
  width: 10px;
  height: 10px;
  border-radius: 999px;
}

.legend1 {
  background-color: #4dd2a6;
}
.legend2 {
  background-color: #4f9cff;
}
.legend3 {
  background-color: #d9d9d9;
}
.legend4 {
  background-color: #ff6b81;
}

.legend-text {
  margin-right: 4px;
}

/* 왼쪽/오른쪽 제목을 같은 줄로 맞추기 */
.form-panel h2,
.ranking-header h2 {
  margin: 0 0 8px 0;
  font-size: 18px;
}

.games-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 4px;
}

.games-header h2 {
  margin: 0;
}

/* 오른쪽 영역(내보내기 + 업로드) 묶음 */
.games-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* 내보내기 버튼 스타일 */
.export-link {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  text-decoration: none;
  color: #333;
  background-color: #fafafa;
}

.export-link:hover {
  background-color: #eee;
}

/* 업로드 링크 */
.import-link {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  text-decoration: none;
  color: #333;
  background-color: #fafafa;
}

.import-link:hover {
  background-color: #eee;
}

/* 상단 헤더 바 */
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.top-bar h1 {
  margin: 0;
  font-size: 22px;
}

/* 탭 전환 버튼 */
.view-switch {
  display: flex;
  gap: 8px;
}

.view-switch-btn {
  font-size: 13px;
  padding: 4px 10px;
  border-radius: 16px;
  border: 1px solid #ccc;
  background-color: #f8f8f8;
  cursor: pointer;
}

.view-switch-btn.active {
  border-color: #4f7dff;
  background-color: #e4ebff;
  color: #1f3bb8;
  font-weight: 600;
}

/* 개인전 왼쪽 섹션들 카드화 */
.form-panel,
.games-panel,
.rule-panel,
.ranking-panel {
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid #ddd;
  background-color: #fafafa;
}

.form-panel h2,
.games-panel h2,
.rule-panel h2,
.ranking-panel h2 {
  margin: 0 0 6px 0;
  font-size: 15px;
}

/* 입력 폼 줄 */
.form-panel .row {
  display: flex;
  gap: 6px;
  align-items: center;
  margin-bottom: 4px;
}

.form-panel .row label {
  width: 50px;
  font-size: 12px;
}

.form-panel .row input {
  font-size: 12px;
  padding: 3px 6px;
}

.form-panel button {
  font-size: 12px;
  padding: 4px 10px;
}

/* 대국 기록 테이블 */
.games-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.games-table th,
.games-table td {
  border: 1px solid #ddd;
  padding: 3px 4px;
}

/* 규칙 리스트 */
.rule-panel ul {
  margin: 4px 0 0 16px;
  padding: 0;
  font-size: 12px;
}

/* 승리 칸 */
.winner-cell {
  background-color: #e5f0ff;
}

/* 오른쪽(개인) 순위 박스는 카드 배경 제거 */
.right-panel .ranking-panel {
  background-color: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
}

/* 오른쪽 표 안 여백만 살짝 */
.right-panel .ranking-header {
  margin-bottom: 6px;
}

.right-panel .ranking-table {
  background-color: #fafafa;
  border-radius: 12px;
  border: 1px solid #ddd;
  overflow: hidden;
}

/* 입력 칸 높이 통일 */
.form-panel .row input {
  height: 24px;
  line-height: 24px;
  padding: 0 8px;
  box-sizing: border-box;
}

/* number 스피너 제거 */
.form-panel .row input[type="number"] {
  -moz-appearance: textfield;
}

.form-panel .row input[type="number"]::-webkit-outer-spin-button,
.form-panel .row input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* 개인 레이팅 화면: 좌우 1:1 느낌 */
.main-layout.equal-layout {
  grid-template-columns: 1fr 1fr;
}

/* 힌트 텍스트 */
.hint-text {
  font-size: 11px;
  color: #666;
}

/* ================= 개인별 통계 / 관리자 공통 패널 ================= */

.stats-panel,
.admin-panel {
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid #ddd;
  background-color: #fafafa;
}

.stats-panel h2,
.stats-panel h3,
.admin-panel h2,
.admin-panel h3 {
  margin: 0 0 6px 0;
  font-size: 15px;
}

/* 통계: 플레이어 선택 */
.stats-player-select {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.stats-player-select label {
  font-size: 13px;
}

.stats-player-select select {
  flex: 1;
  font-size: 13px;
  padding: 4px 6px;
}

/* 통계 요약 */
.stats-summary-main {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 4px 12px;
  font-size: 13px;
}

.stats-label {
  display: inline-block;
  min-width: 60px;
  color: #666;
}

.stats-value {
  font-weight: 600;
}

/* 통계: 등수 분포 */
.stats-rank-dist {
  margin-top: 4px;
}

/* 최근 등수 그래프 */
.recent-rank-graph {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.recent-rank-item {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: #fff;
}

.recent-rank-item.rank-1 {
  background-color: #4dd2a6;
}
.recent-rank-item.rank-2 {
  background-color: #4f9cff;
}
.recent-rank-item.rank-3 {
  background-color: #d9d9d9;
  color: #333;
}
.recent-rank-item.rank-4 {
  background-color: #ff6b81;
}

/* 같이 한 플레이어 테이블 */
.stats-co-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.stats-co-table th,
.stats-co-table td {
  border: 1px solid #ddd;
  padding: 3px 4px;
}

/* 관리자: 폼 행 */
.form-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
  font-size: 13px;
}

.form-row label {
  width: 70px;
}

.form-row input,
.form-row select {
  flex: 1;
  font-size: 13px;
  padding: 3px 6px;
}

.admin-panel button {
  font-size: 12px;
  padding: 4px 10px;
}

/* 관리자: 플레이어 선택 */
.admin-player-select {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.admin-player-select input {
  flex: 1;
  font-size: 13px;
  padding: 3px 6px;
}

.admin-player-select button {
  font-size: 12px;
  padding: 4px 10px;
}

/* 뱃지 리스트 / 칩 */
.badge-list-inner {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 4px;
}

.badge-chip {
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 12px;
  background-color: #fff;
  border: 1px solid #ddd;
}

.badge-top-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.badge-main {
  font-weight: 600;
}

.badge-code {
  display: inline-block;
  margin-right: 4px;
  font-family: monospace;
  font-size: 11px;
  padding: 0 4px;
  border-radius: 4px;
  background-color: #f0f0f0;
}

.badge-desc {
  margin-top: 2px;
  font-size: 11px;
  color: #555;
}

/* 뱃지 등급별 색 */
.badge-grade-플래티넘 {
  border-color: #00c2ff;
  background: #e6f9ff;
}
.badge-grade-골드 {
  border-color: #f0b400;
  background: #fff7e0;
}
.badge-grade-실버 {
  border-color: #a0a0a0;
  background: #f4f4f4;
}
.badge-grade-브론즈 {
  border-color: #c07a3a;
  background: #fbeee2;
}
.badge-grade-기타 {
  border-color: #bbb;
  background: #f8f8f8;
}

/* 뱃지 칩 내 삭제 버튼 */
.badge-chip button {
  font-size: 11px;
  padding: 2px 6px;
}

/* 뱃지 테이블 */
.badge-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.badge-table th,
.badge-table td {
  border: 1px solid #ddd;
  padding: 3px 4px;
}

/* 전체 등수 표 셀 간격 줄이기 */
.ranking-table th,
.ranking-table td {
  padding: 2px 4px;   /* 위아래 2px, 좌우 4px (원래는 6px 8px) */
}

/* 총 등수 통계 아래 1~4등 요약 */
.stats-rank-info {
  margin-top: 4px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
  font-size: 11px;
  color: #555;
}

.stats-rank-info-item {
  min-width: 80px;
}

.my-player-cell {
  background-color: #fff7d6; /* 내가 앉은 자리 살짝 강조 */
}

.rank-dist-detail {
  margin-top: 4px;
  font-size: 11px;
  color: #444;
}

.rank-dist-detail-row {
  line-height: 1.4;
}

/* 순위 칸 */
.ranking-table th:nth-child(1),
.ranking-table td:nth-child(1) { width: 30px; }

/* 이름 칸 */
.ranking-table th:nth-child(2),
.ranking-table td:nth-child(2) { width: 70px; }

/* 게임 수 */
.ranking-table th:nth-child(3),
.ranking-table td:nth-child(3) { width: 50px; }

/* 총 pt */
.ranking-table th:nth-child(4),
.ranking-table td:nth-child(4) { width: 55px; }

/* 평균 pt (신규) */
.ranking-table th:nth-child(5),
.ranking-table td:nth-child(5) { width: 55px; }

/* 연대율 */
.ranking-table th:nth-child(6),
.ranking-table td:nth-child(6) { width: 55px; }

/* 등수 분포 */
.ranking-table th:nth-child(7),
.ranking-table td:nth-child(7) { width: 130px; }

/* 1~4등 퍼센트/판수 한 줄 */
.rank-dist-summary-row{
  display:flex;
  gap: 8px;
  margin-top: 6px;
  font-size: 11px;
  white-space: nowrap;
}
.rank-dist-summary-row span{
  flex: 1;
  text-align: center;
  padding: 2px 4px;
  border-radius: 10px;
  border: 1px solid #eee;
  background: #fff;
}

/* 개인 대국 기록 테이블(통계/대회 공용) */
.stats-player-games-table{
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}
.stats-player-games-table th,
.stats-player-games-table td{
  border: 1px solid #ddd;
  padding: 3px 4px;
  text-align: center;
}

/* 선택한 플레이어 자리 강조 (JS에서 my-player-cell 붙임) */
.my-player-cell{
  outline: 2px solid #4f7dff;
  outline-offset: -2px;
  background: #e4ebff;
}

/* ✅ 대회 전용 폼을 개인전 폼과 동일하게 */
#tournament-game-form .row {
  display: grid;
  grid-template-columns: 40px 1fr 140px;
  gap: 8px;
  margin-bottom: 8px;
}

#tournament-game-form label {
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

#tournament-game-form input[type="text"],
#tournament-game-form input[type="number"] {
  width: 100%;
  box-sizing: border-box;
  padding: 6px 8px;
}

#tournament-game-form button {
  margin-top: 4px;
  padding: 6px 12px;
  cursor: pointer;
}

/* ✅ 대회 랭킹 테이블(7컬럼) 폭 고정 */
.tournament-ranking-table th:nth-child(1),
.tournament-ranking-table td:nth-child(1) { width: 30px; }

.tournament-ranking-table th:nth-child(2),
.tournament-ranking-table td:nth-child(2) { width: 70px; }

.tournament-ranking-table th:nth-child(3),
.tournament-ranking-table td:nth-child(3) { width: 50px; }

.tournament-ranking-table th:nth-child(4),
.tournament-ranking-table td:nth-child(4) { width: 55px; }

.tournament-ranking-table th:nth-child(5),
.tournament-ranking-table td:nth-child(5) { width: 55px; }

.tournament-ranking-table th:nth-child(6),
.tournament-ranking-table td:nth-child(6) { width: 55px; }

.tournament-ranking-table th:nth-child(7),
.tournament-ranking-table td:nth-child(7) { width: 130px; }

/* ===== 정렬 가능한 헤더 ===== */
th.sortable {
  cursor: pointer;
  user-select: none;
}

th.sortable:hover {
  background-color: #ececec;
}

.sort-indicator {
  display: inline-block;
  margin-left: 6px;
  font-size: 11px;
  color: #666;
}

/* ranking-table 컬럼 폭(7컬럼 기준) */
.ranking-table th:nth-child(1),
.ranking-table td:nth-child(1) { width: 30px; }

.ranking-table th:nth-child(2),
.ranking-table td:nth-child(2) { width: 70px; }

.ranking-table th:nth-child(3),
.ranking-table td:nth-child(3) { width: 55px; }  /* 게임 수 */

.ranking-table th:nth-child(4),
.ranking-table td:nth-child(4) { width: 55px; }  /* 총 pt */

.ranking-table th:nth-child(5),
.ranking-table td:nth-child(5) { width: 55px; }  /* 평균 pt */

.ranking-table th:nth-child(6),
.ranking-table td:nth-child(6) { width: 55px; }  /* 연대율 */

.ranking-table th:nth-child(7),
.ranking-table td:nth-child(7) { width: 130px; } /* 등수 분포 */

th.sortable.sorted-desc { border-bottom: 2px solid #4f7dff; }
th.sortable.sorted-asc  { border-top: 2px solid #4f7dff; }

/* 모바일에서 표 안깨지게: 가로 스크롤 허용 */
.table-scroll {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* 표 레이아웃 안정화 */
#ranking-table,
#archive-ranking-table,
#tournament-ranking-table {
  width: 100%;
  table-layout: fixed; /* 칼럼 폭 제어 쉬워짐 */
}

/* 연대율(6번째 칼럼) 줄바꿈/폭 낭비 방지 */
#ranking-table th:nth-child(6),
#ranking-table td:nth-child(6),
#archive-ranking-table th:nth-child(6),
#archive-ranking-table td:nth-child(6),
#tournament-ranking-table th:nth-child(6),
#tournament-ranking-table td:nth-child(6) {
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}


/* ✅ 모든 화면 공통: 연대율 칸이 폭을 다 먹지 못하게 + 그래프는 셀 안에서 100%로 */
#ranking-table,
#archive-ranking-table,
#tournament-ranking-table {
  table-layout: fixed; /* 핵심 */
  width: 100%;
}

/* (선택) 이름 칸이 길면 옆 칸을 침범하지 않게 */
#ranking-table th:nth-child(2),
#ranking-table td:nth-child(2),
#archive-ranking-table th:nth-child(2),
#archive-ranking-table td:nth-child(2),
#tournament-ranking-table th:nth-child(2),
#tournament-ranking-table td:nth-child(2) {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ✅ 연대율(6번째) 폭 고정 */
#ranking-table th:nth-child(6),
#ranking-table td:nth-child(6),
#archive-ranking-table th:nth-child(6),
#archive-ranking-table td:nth-child(6),
#tournament-ranking-table th:nth-child(6),
#tournament-ranking-table td:nth-child(6) {
  width: 84px;            /* 여기 숫자만 살짝 조절하면 돼요 */
  white-space: nowrap;
  text-align: right;
}

/* ✅ 그래프(7번째) 칸 폭 확보 */
#ranking-table th:nth-child(7),
#ranking-table td:nth-child(7),
#archive-ranking-table th:nth-child(7),
#archive-ranking-table td:nth-child(7),
#tournament-ranking-table th:nth-child(7),
#tournament-ranking-table td:nth-child(7) {
  width: 200px;           /* 데스크탑에서 잘리면 220~260으로 올려도 돼요 */
}

/* ✅ 그래프는 “셀 폭에 맞춰서” (잘림 방지) */
#ranking-table td:nth-child(7) .rank-dist-bar,
#archive-ranking-table td:nth-child(7) .rank-dist-bar,
#tournament-ranking-table td:nth-child(7) .rank-dist-bar {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* ================= FIX: 그래프 잘림 / 연대율 폭 문제 ================= */

/* flex 레이아웃에서 오른쪽 패널이 내용 때문에 안 줄어들며 잘리는 문제 방지 */
.left-panel,
.right-panel {
  min-width: 0;
}

/* 테이블은 고정 레이아웃 + 마지막(그래프) 칼럼은 "남는 폭"만 쓰게 */
#ranking-table,
#archive-ranking-table,
#tournament-ranking-table {
  width: 100%;
  table-layout: fixed;
}

/* (선택) 이름이 길면 옆 칸 침범 방지 */
#ranking-table th:nth-child(2),
#ranking-table td:nth-child(2),
#archive-ranking-table th:nth-child(2),
#archive-ranking-table td:nth-child(2),
#tournament-ranking-table th:nth-child(2),
#tournament-ranking-table td:nth-child(2) {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ✅ 연대율(6번째) 폭을 작게 고정 (여기가 커지면 그래프가 죽어요) */
#ranking-table th:nth-child(6),
#ranking-table td:nth-child(6),
#archive-ranking-table th:nth-child(6),
#archive-ranking-table td:nth-child(6),
#tournament-ranking-table th:nth-child(6),
#tournament-ranking-table td:nth-child(6) {
  width: 55px !important;
  white-space: nowrap;
  text-align: center;
}

/* ✅ 그래프(7번째)는 고정 px 주지 말고 "남는 폭"을 쓰게 */
#ranking-table th:nth-child(7),
#ranking-table td:nth-child(7),
#archive-ranking-table th:nth-child(7),
#archive-ranking-table td:nth-child(7),
#tournament-ranking-table th:nth-child(7),
#tournament-ranking-table td:nth-child(7) {
  width: auto !important;
}

/* ✅ 그래프 바: min-width 강제 제거 + 원래 높이로 */
.rank-dist-bar {
  width: 100%;
  max-width: 100%;
  min-width: 0 !important;     /* 핵심: 여기 때문에 안 줄어들고 잘렸어요 */
  height: 14px !important;     /* 원래 크기 */
  box-sizing: border-box;
}
